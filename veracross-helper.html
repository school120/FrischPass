<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Veracross Helper</title>
</head>
<body style="margin:0">
<iframe id="vera" src="https://checkin.veracross.com/frisch/kiosk/soutoffice"
        style="width:100%;height:100%;border:0"></iframe>

<script>
// Listen for IDs from the kiosk page
window.addEventListener('message',async e=>{
  if(!e.data.legacy_id) return;
  const id=e.data.legacy_id;
  const frame=document.getElementById('vera');
  try{
    const form=frame.contentWindow.document.getElementById('legacy_id');
    if(form){
      form.value=id;
      form.form.submit();
      e.source.postMessage('submitted','*');
    }else{
      e.source.postMessage('error','*');
    }
  }catch(err){
    // likely blocked by X-Frame-Options
    console.error('Unable to access Veracross frame:',err);
    e.source.postMessage('error','*');
  }
});
</script>
</body>
</html>
